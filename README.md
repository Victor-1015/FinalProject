# Автоматизированное тестирование UI и API сайта Kvitki.by

Данный проект представляет собой тестовый фреймворк на Java для автоматизированного тестирования функционала авторизации и регистрации сайта `kvitki.by`. Проект охватывает как тестирование через пользовательский интерфейс (UI), так и напрямую через программный интерфейс (API).

## О проекте

Основная цель проекта — продемонстрировать навыки построения тестового фреймворка с нуля, используя современные инструменты и подходы в автоматизации тестирования. В ходе работы были автоматизированы ключевые сценарии, а также проведен глубокий анализ поведения системы, включая ее защиту от автоматизации.

## Технологии и инструменты

* **Java 17:** Основной язык программирования.
* **Maven:** Система управления проектом и зависимостями.
* **Selenium WebDriver:** Библиотека для автоматизации взаимодействия с браузером (UI-тесты).
* **TestNG:** Фреймворк для запуска тестов и управления ими.
* **REST Assured:** Библиотека для тестирования REST API.
* **Page Object Model (POM):** Паттерн проектирования, использованный для структурирования UI-тестов.
* **IntelliJ IDEA:** Среда разработки.

## Реализованные тесты

### UI Тесты
В рамках проекта были разработаны UI-тесты, проверяющие основной функционал форм:
* Проверка появления ошибки при вводе неверного логина и пароля.
* Проверка появления ошибки при вводе несовпадающих паролей на форме регистрации.

### API Тесты
API-тесты были созданы для быстрой и стабильной проверки серверной логики:
* **Негативный тест авторизации:** Проверка ответа сервера (`401 Unauthorized`) при отправке неверных учетных данных на эндпоинт `/login`.
* **Позитивный тест авторизации:** Проверка успешного ответа (`200 OK`) и получения `accessToken` при отправке валидных данных.
* **Исследовательский тест регистрации:** Проверка эндпоинта `/customer`, которая выявила, что он является защищенным и требует для доступа специальный токен (`api_token_not_valid`).

## Ключевые выводы и особенности проекта

В ходе работы над проектом были выявлены важные особенности тестируемой системы.

#### 1. Продвинутая защита от автоматизации (UI)
Главной сложностью при написании UI-тестов стало то, что сайт **обнаруживает запуск через Selenium WebDriver**. В ответ на это он отдает измененную версию страницы, в шапке которой **полностью отсутствуют навигационные элементы**, включая иконку входа/профиля. Это делает стандартные пользовательские сценарии непроходимыми.
* **Решение:** Был найден единственный стабильный обходной путь — переход на внутреннюю страницу сайта ("Контакты"), что заставляло сайт отобразить необходимые элементы.

#### 2. Автоматические скриншоты при ошибках
Для эффективной отладки подобных UI-проблем в `BaseTest` был добавлен механизм, который **автоматически делает скриншот** страницы в момент падения любого теста. Это позволило нам точно определить причину падений.

#### 3. Защищенный API регистрации
В отличие от публичного API логина, **API регистрации оказалось защищенным**. Попытка создать нового пользователя без специального токена авторизации возвращает ошибку `401 Unauthorized` и сообщение `api_token_not_valid`. Это является стандартной практикой для защиты системы от спам-регистраций ботами и важным результатом тестирования.

## Инструкция по запуску

1.  Клонируйте репозиторий на свой компьютер:
    ```bash
    git clone [https://github.com/new](https://github.com/new)
    ```
2.  Откройте проект в IntelliJ IDEA.
3.  Дождитесь, пока Maven автоматически загрузит все необходимые зависимости, указанные в `pom.xml`.
4.  Для запуска тестов:
    * Откройте тестовый класс в директории `src/test/java/by/kvitki/tests/` (например, `ApiTest.java`).
    * Нажмите на зеленую кнопку "Play" рядом с названием класса или конкретного тестового метода.
